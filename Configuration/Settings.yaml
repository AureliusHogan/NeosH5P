Neos:
  Neos:
    modules:
      'h5p':
        label: 'H5P Rich Content'
        controller: 'Sandstorm\NeosH5P\Controller\Backend\MainController'
        description: 'Contains modules for managing H5P objects.'
        icon: icon-flash
        submodules:
          content:
            label: 'H5P Content'
            controller: 'Sandstorm\NeosH5P\Controller\Backend\ContentController'
            description: 'Create, edit and manage H5P content elements.'
            icon: icon-check-square
            actions:
              new:
                label: 'New H5P Content'
                title: 'Create new H5P content element'
          library:
            label: 'H5P Libraries'
            controller: 'Sandstorm\NeosH5P\Controller\Backend\LibraryController'
            description: 'Manage H5P libraries, get upgraded versions, and update the H5P hub cache.'
            icon: icon-book
          results:
            label: 'H5P User Results'
            controller: 'Sandstorm\NeosH5P\Controller\Backend\ResultsController'
            description: 'View and delete user results for H5P content elements.'
            icon: icon-flag-checkered
          administration:
            label: 'H5P Administration'
            controller: 'Sandstorm\NeosH5P\Controller\Backend\AdministrationController'
            description: 'Make administrative settings for H5P.'
            icon: icon-cogs


  Flow:
    # We need the tag "@variable" as an ignored annotation, because otherwise parsing of the
    # H5PFrameworkInterface causes a reflection error
    reflection:
      ignoredTags:
        'variable': true


    resource:
      storages:
        h5pLibraryStorage:
          storage: 'Sandstorm\NeosH5P\Resource\Storage\ExtractedH5PFileStorage'
        h5pCoreStorage:
          storage: 'Sandstorm\NeosH5P\Resource\Storage\H5PPackageFileStorage'
          storageOptions:
            path: '%FLOW_PATH_PACKAGES%Libraries/h5p/h5p-core/'
            subfolders:
              - 'fonts'
              - 'images'
              - 'js'
              - 'styles'
        h5pEditorStorage:
          storage: 'Sandstorm\NeosH5P\Resource\Storage\H5PPackageFileStorage'
          storageOptions:
            path: '%FLOW_PATH_PACKAGES%Libraries/h5p/h5p-editor/'
            subfolders:
              - 'ckeditor'
              - 'images'
              - 'language'
              - 'libs'
              - 'scripts'
              - 'styles'

      collections:
        h5p-libraries:
          storage: 'h5pLibraryStorage'
          target: 'h5pLibraryTarget'
        h5p-core-files:
          storage: 'h5pCoreStorage'
          target: 'h5pCoreTarget'
        h5p-editor-files:
          storage: 'h5pEditorStorage'
          target: 'h5pEditorTarget'

      targets:
        h5pLibraryTarget:
          target: 'Neos\Flow\ResourceManagement\Target\FileSystemTarget'
          targetOptions:
            path: '%FLOW_PATH_WEB%_Resources/Static/H5P/'
            baseUri: '_Resources/Static/H5P/'
            subdivideHashPathSegment: false
        h5pCoreTarget:
          target: 'Neos\Flow\ResourceManagement\Target\FileSystemTarget'
          targetOptions:
            path: '%FLOW_PATH_WEB%_Resources/Static/H5P/h5p-core/'
            baseUri: '_Resources/Static/H5P/h5p-core/'
            subdivideHashPathSegment: false
        h5pEditorTarget:
          target: 'Neos\Flow\ResourceManagement\Target\FileSystemTarget'
          targetOptions:
            path: '%FLOW_PATH_WEB%_Resources/Static/H5P/h5p-editor/'
            baseUri: '_Resources/Static/H5P/h5p-editor/'
            subdivideHashPathSegment: false
